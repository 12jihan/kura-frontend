<div class="password-reset">
  <h2 class="password-reset__title">Reset your password</h2>

  @if (!isSubmitted()) {
    <p class="password-reset__subtitle">
      Enter your email address and we'll send you a link to reset your password.
    </p>

    <form class="password-reset__form" [formGroup]="resetForm" (ngSubmit)="onSubmit()">
      <app-form-input
        label="Email"
        type="email"
        placeholder="you@example.com"
        inputId="reset-email"
        formControlName="email"
        [control]="$any(emailControl)"
        [errorMessages]="emailErrorMessages"
        autocomplete="email"
      ></app-form-input>

      <app-button
        type="submit"
        variant="primary"
        [loading]="isSubmitting()"
        [disabled]="isSubmitting()"
        [fullWidth]="true"
      >
        Send Reset Link
      </app-button>
    </form>
  } @else {
    <div class="password-reset__success">
      <lucide-icon [img]="checkCircleIcon" class="password-reset__success-icon"></lucide-icon>
      <p class="password-reset__success-message">Reset link sent! Check your email.</p>
    </div>
  }

  <p class="password-reset__footer">
    <a class="password-reset__link" routerLink="/login">Back to login</a>
  </p>
</div>
